# ã‚¹ã‚­ãƒ¼ãƒå®šç¾©

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã¨TypeScriptå‹å®šç¾©ã‚’é…ç½®ã—ã¾ã™ã€‚

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

- `database.sql`: PostgreSQLã‚¹ã‚­ãƒ¼ãƒï¼ˆDDLï¼‰
- `types.ts`: TypeScriptå‹å®šç¾©ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ç”Ÿæˆï¼‰

## ğŸ“‹ ã‚¹ã‚­ãƒ¼ãƒç®¡ç†æ–¹æ³•

### 1. ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã®æ›´æ–°

1. `database.sql` ã«SQL DDLã‚’è¨˜è¿°
2. Supabaseãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ `supabase/migrations/` ã«é…ç½®
3. TypeScriptå‹å®šç¾©ã‚’ `types.ts` ã«è¿½åŠ 

### 2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

```bash
# Supabase CLIã§ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
supabase db push

# ã¾ãŸã¯ã€Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å®Ÿè¡Œ
```

### 3. å‹å®šç¾©ã®ç”Ÿæˆ

TypeScriptå‹å®šç¾©ã¯æ‰‹å‹•ã§ `types.ts` ã«è¨˜è¿°ã™ã‚‹ã‹ã€Supabase CLIã®å‹ç”Ÿæˆæ©Ÿèƒ½ã‚’ä½¿ç”¨ï¼š

```bash
# Supabase CLIã§å‹å®šç¾©ã‚’ç”Ÿæˆ
supabase gen types typescript --local > src/types/database.ts
```

## ğŸ“Š ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«

è©³ç´°ã¯ä»•æ§˜æ›¸ï¼ˆ`refeed_service_spec_v3.md`ï¼‰ã®19.3ç« ã‚’å‚ç…§ï¼š

- `users`: ãƒ¦ãƒ¼ã‚¶ãƒ¼åŸºæœ¬æƒ…å ±
- `metrics_daily`: æ—¥æ¬¡ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆä½“é‡ã€RHRã€ä½“æ¸©ç­‰ï¼‰
- `scores`: ã‚¹ã‚³ã‚¢ï¼ˆplateau_flagã€MASã€RRSï¼‰
- `recommendations`: ãƒªãƒ•ã‚£ãƒ¼ãƒ‰ææ¡ˆ
- `consents`: åŒæ„æƒ…å ±
- `audit_logs`: ç›£æŸ»ãƒ­ã‚°
