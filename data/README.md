# データディレクトリ

このディレクトリには、サンプルデータやスキーマ定義を配置します。

## 📁 ディレクトリ構成

```
data/
├── README.md              # このファイル
├── schema/                # スキーマ定義
│   ├── README.md          # スキーマ管理方法
│   ├── database.sql        # PostgreSQLスキーマ（DDL）
│   └── types.ts           # TypeScript型定義
└── samples/               # サンプルデータ（オプション）
    └── metrics_sample.json
```

## 📋 データの前提・取得元・更新頻度

### データソース

- **ユーザーデータ**: ユーザーによる手動入力またはデバイス連携
- **生体メトリクス**: Apple Health / Google Fit / Oura / Withings / Garmin 等
- **計算結果**: サーバーサイドで自動計算（RRS、MAS等）

### データ更新頻度

- **日次データ**: 1日1回（起床時）
- **デバイス連携**: 1時間ごと（バックグラウンド同期）
- **スコア計算**: 1日1回（朝6:30）

### データ保持期間

- **アクティブデータ**: 無期限（ユーザーが削除するまで）
- **バックアップ**: 3年間保持（ユーザー設定で変更可能）

## 🔐 データセキュリティ

- すべてのデータはSupabaseのRow Level Security (RLS)で保護
- PII（個人識別情報）は別スキーマ（`pii`）に分離
- データベース接続はTLSで暗号化

## 📊 スキーマ定義

詳細なスキーマ定義は `schema/` ディレクトリを参照してください。
